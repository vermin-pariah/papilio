# 更新日志 (CHANGELOG)

## [v0.1.0] - 2026-02-19
这是 Papilio 的首个公开预览版，重点在于构建稳健的后端基础与响应式的移动端体验。

### 安全与健壮性
- **上传指纹校验**: 引入 `infer` 库进行文件头 Magic Number 匹配，防止非法上传。
- **路径净化**: 引入 `sanitize-filename` 彻底封堵路径穿越漏洞。
- **并发控制**: 为扫描器引入全局互斥锁，防止数据库并发冲突。
- **自愈机制**: 服务启动时自动清理因异常宕机挂起的扫描/同步状态。

### 功能与性能优化
- **批量更新**: 播放列表排序重构为单次 SQL 批量更新，显著降低数据库负载。
- **智能扫描**: 集成 MusicBrainz 接口，支持自动抓取封面与元数据。
- **歌词支持**: 支持本地 LRC 文件，集成 `encoding_rs` 处理多编码（GBK/UTF-8）自适应。

### 移动端
- **UI 适配**: 彻底修复小屏幕机型下的布局溢出问题。
- **系统集成**: 适配 Android 13+ 通知权限，集成 401 自动登出拦截器。
